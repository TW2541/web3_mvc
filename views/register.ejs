<!DOCTYPE html>
<html>
  <head>
	<title>Register</title>
  </head>
  <body>
	<%- include('partial/nav')%>
	<h1>Register</h1>
	<p id = "not_connected">Connect wallet before register!!!</p>
	<form id = "registerForm" style="display: none;" action="/register" method="post">
  	<!-- user input-->
  	Username:<br>
  	<input type="text" name="username" placeholder="Username" required><br><br>
	First Name:<br>
  	<input type="text" name="firstname" placeholder="First Name" required><br><br>
	Last Name:<br>
  	<input type="text" name="lastname" placeholder="Last Name" required><br><br>
	Wallet Address:<br>
  	<input type="hidden" name="address" placeholder="Wallet Address" required>
	<p id = "account"></p>
  	Password:<br>
  	<input type="password" name="password" placeholder="Password" required><br><br>
      
  	<!-- submit button -->
  	<input type="submit" value="register">
	</form>
  </body>

  <script>
	  const connectButton = document.getElementById("connectButton");
	  const form = document.getElementById("registerForm");
	  const warning = document.getElementById("not_connected");
	  const accountText = document.getElementById("account");
	  const accessToMetamask = async () => {
        if(window.ethereum !== "undefined") {
            const accounts = await ethereum.request({ method: "eth_requestAccounts"});
            account = accounts[0];
            connectButton.innerHTML = account;
			form.address.value = account;
			accountText.innerHTML = account;
			form.style.display = "block";
			warning.style.display = "none";
        }
	}
  </script>
</html>